=== RUN   TestAuthBypass_NoAuthProvided
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/parts
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/parts
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/parts/123
=== RUN   TestAuthBypass_NoAuthProvided/PUT_/api/v1/parts/123
=== RUN   TestAuthBypass_NoAuthProvided/DELETE_/api/v1/parts/123
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/ecos
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/ecos
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/ecos/1
=== RUN   TestAuthBypass_NoAuthProvided/PUT_/api/v1/ecos/1
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/vendors
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/vendors
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/inventory
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/inventory/transact
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/pos
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/pos
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/workorders
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/workorders
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/docs
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/docs
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/ncrs
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/ncrs
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/capas
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/capas
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/rmas
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/rmas
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/quotes
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/quotes
=== RUN   TestAuthBypass_NoAuthProvided/GET_/api/v1/devices
=== RUN   TestAuthBypass_NoAuthProvided/POST_/api/v1/devices
--- PASS: TestAuthBypass_NoAuthProvided (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/parts (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/parts (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/parts/123 (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/PUT_/api/v1/parts/123 (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/DELETE_/api/v1/parts/123 (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/ecos (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/ecos (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/ecos/1 (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/PUT_/api/v1/ecos/1 (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/vendors (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/vendors (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/inventory (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/inventory/transact (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/pos (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/pos (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/workorders (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/workorders (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/docs (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/docs (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/ncrs (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/ncrs (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/capas (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/capas (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/rmas (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/rmas (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/quotes (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/quotes (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/GET_/api/v1/devices (0.00s)
    --- PASS: TestAuthBypass_NoAuthProvided/POST_/api/v1/devices (0.00s)
=== RUN   TestAuthBypass_ExpiredSession
=== RUN   TestAuthBypass_ExpiredSession//api/v1/parts
=== RUN   TestAuthBypass_ExpiredSession//api/v1/ecos
=== RUN   TestAuthBypass_ExpiredSession//api/v1/vendors
=== RUN   TestAuthBypass_ExpiredSession//api/v1/inventory
=== RUN   TestAuthBypass_ExpiredSession//api/v1/workorders
--- PASS: TestAuthBypass_ExpiredSession (0.08s)
    --- PASS: TestAuthBypass_ExpiredSession//api/v1/parts (0.00s)
    --- PASS: TestAuthBypass_ExpiredSession//api/v1/ecos (0.00s)
    --- PASS: TestAuthBypass_ExpiredSession//api/v1/vendors (0.00s)
    --- PASS: TestAuthBypass_ExpiredSession//api/v1/inventory (0.00s)
    --- PASS: TestAuthBypass_ExpiredSession//api/v1/workorders (0.00s)
=== RUN   TestAuthBypass_InvalidSession
=== RUN   TestAuthBypass_InvalidSession/Token:_invalid-token-12345
=== RUN   TestAuthBypass_InvalidSession/Token:_forged-session-token
=== RUN   TestAuthBypass_InvalidSession/Token:_';_DROP_TABLE_sessions;_--
2026/02/20 04:29:09 net/http: invalid byte ';' in Cookie.Value; dropping invalid bytes
=== RUN   TestAuthBypass_InvalidSession/Token:_../../../etc/passwd
=== RUN   TestAuthBypass_InvalidSession/Token:_<script>alert('xss')</script>
=== RUN   TestAuthBypass_InvalidSession/Token:_
=== RUN   TestAuthBypass_InvalidSession/Token:_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
--- PASS: TestAuthBypass_InvalidSession (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_invalid-token-12345 (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_forged-session-token (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_';_DROP_TABLE_sessions;_-- (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_../../../etc/passwd (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_<script>alert('xss')</script> (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_ (0.00s)
    --- PASS: TestAuthBypass_InvalidSession/Token:_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa (0.00s)
=== RUN   TestAuthBypass_InactiveUser
    SKIP__security_auth_bypass_test.go:292: Expected 403 Forbidden for inactive user, got 401
    SKIP__security_auth_bypass_test.go:298: Expected error about deactivated account, got Unauthorized
--- FAIL: TestAuthBypass_InactiveUser (0.08s)
=== RUN   TestAuthBypass_CrossUserSession
    SKIP__security_auth_bypass_test.go:334: Expected 200 with valid session, got 401
--- FAIL: TestAuthBypass_CrossUserSession (0.15s)
=== RUN   TestAuthBypass_AdminEndpoints
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/users
=== RUN   TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/users
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/users
=== RUN   TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/users
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/users/1
=== RUN   TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/users/1
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_DELETE_/api/v1/users/1
=== RUN   TestAuthBypass_AdminEndpoints/Admin_DELETE_/api/v1/users/1
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/users/1/password
=== RUN   TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/users/1/password
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/apikeys
=== RUN   TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/apikeys
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/apikeys
=== RUN   TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/apikeys
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_DELETE_/api/v1/apikeys/1
=== RUN   TestAuthBypass_AdminEndpoints/Admin_DELETE_/api/v1/apikeys/1
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/api-keys
=== RUN   TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/api-keys
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/api-keys
=== RUN   TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/api-keys
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/email/config
=== RUN   TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/email/config
=== RUN   TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/email/config
=== RUN   TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/email/config
--- PASS: TestAuthBypass_AdminEndpoints (0.16s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/users (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/users (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/users (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/users (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/users/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/users/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_DELETE_/api/v1/users/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_DELETE_/api/v1/users/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/users/1/password (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/users/1/password (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/apikeys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/apikeys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/apikeys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/apikeys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_DELETE_/api/v1/apikeys/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_DELETE_/api/v1/apikeys/1 (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/api-keys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/api-keys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_POST_/api/v1/api-keys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_POST_/api/v1/api-keys (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_GET_/api/v1/email/config (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_GET_/api/v1/email/config (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/RegularUser_PUT_/api/v1/email/config (0.00s)
    --- PASS: TestAuthBypass_AdminEndpoints/Admin_PUT_/api/v1/email/config (0.00s)
=== RUN   TestAuthBypass_InvalidBearerToken
=== RUN   TestAuthBypass_InvalidBearerToken/Key:_invalid-api-key
=== RUN   TestAuthBypass_InvalidBearerToken/Key:_Bearer_token
=== RUN   TestAuthBypass_InvalidBearerToken/Key:_zrp_invalid_key
=== RUN   TestAuthBypass_InvalidBearerToken/Key:_
=== RUN   TestAuthBypass_InvalidBearerToken/Key:_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
--- PASS: TestAuthBypass_InvalidBearerToken (0.00s)
    --- PASS: TestAuthBypass_InvalidBearerToken/Key:_invalid-api-key (0.00s)
    --- PASS: TestAuthBypass_InvalidBearerToken/Key:_Bearer_token (0.00s)
    --- PASS: TestAuthBypass_InvalidBearerToken/Key:_zrp_invalid_key (0.00s)
    --- PASS: TestAuthBypass_InvalidBearerToken/Key:_ (0.00s)
    --- PASS: TestAuthBypass_InvalidBearerToken/Key:_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa (0.00s)
=== RUN   TestAuthBypass_ValidBearerToken
--- PASS: TestAuthBypass_ValidBearerToken (0.00s)
=== RUN   TestAuthBypass_DisabledAPIKey
--- PASS: TestAuthBypass_DisabledAPIKey (0.00s)
=== RUN   TestAuthBypass_OpenAPIExemption
--- PASS: TestAuthBypass_OpenAPIExemption (0.00s)
=== RUN   TestAuthBypass_SessionSlidingWindow
    SKIP__security_auth_bypass_test.go:575: Expected 200, got 401
    SKIP__security_auth_bypass_test.go:595: Expected session expiry to be updated by at least 1 second (sliding window), got 0.00 seconds
--- FAIL: TestAuthBypass_SessionSlidingWindow (1.58s)
=== RUN   TestAuthBypass_SQLInjectionAttempts
=== RUN   TestAuthBypass_SQLInjectionAttempts/SQLi:_'_OR_'1'='1
=== RUN   TestAuthBypass_SQLInjectionAttempts/SQLi:_';_DROP_TABLE_sessions;_--
2026/02/20 04:29:11 net/http: invalid byte ';' in Cookie.Value; dropping invalid bytes
=== RUN   TestAuthBypass_SQLInjectionAttempts/SQLi:_admin'--
=== RUN   TestAuthBypass_SQLInjectionAttempts/SQLi:_'_UNION_SELECT_*_FROM_users--
=== RUN   TestAuthBypass_SQLInjectionAttempts/SQLi:_1'_OR_1=1--
--- PASS: TestAuthBypass_SQLInjectionAttempts (0.00s)
    --- PASS: TestAuthBypass_SQLInjectionAttempts/SQLi:_'_OR_'1'='1 (0.00s)
    --- PASS: TestAuthBypass_SQLInjectionAttempts/SQLi:_';_DROP_TABLE_sessions;_-- (0.00s)
    --- PASS: TestAuthBypass_SQLInjectionAttempts/SQLi:_admin'-- (0.00s)
    --- PASS: TestAuthBypass_SQLInjectionAttempts/SQLi:_'_UNION_SELECT_*_FROM_users-- (0.00s)
    --- PASS: TestAuthBypass_SQLInjectionAttempts/SQLi:_1'_OR_1=1-- (0.00s)
=== RUN   TestSQLInjection_PartsListSearch
=== RUN   TestSQLInjection_PartsListSearch/Payload:_'_OR_'1'='1
=== RUN   TestSQLInjection_PartsListSearch/Payload:_';_DROP_TABLE_parts--
=== RUN   TestSQLInjection_PartsListSearch/Payload:_'_UNION_SELECT_*_FROM_users--
=== RUN   TestSQLInjection_PartsListSearch/Payload:_admin'--
=== RUN   TestSQLInjection_PartsListSearch/Payload:_'_OR_1=1--
=== RUN   TestSQLInjection_PartsListSearch/Payload:_1'_AND_'1'='1
=== RUN   TestSQLInjection_PartsListSearch/Payload:_';_DELETE_FROM_inventory_WHERE_'1'='1
=== RUN   TestSQLInjection_PartsListSearch/Payload:_'_UNION_SELECT_NULL,_username,_password_hash_FROM_users--
=== RUN   TestSQLInjection_PartsListSearch/Payload:_')_OR_('1'='1
=== RUN   TestSQLInjection_PartsListSearch/Payload:_1'_OR_'1'='1'_/*
=== RUN   TestSQLInjection_PartsListSearch/Payload:_';_EXEC_xp_cmdshell('dir')--
=== RUN   TestSQLInjection_PartsListSearch/Payload:_'_AND_1=(SELECT_COUNT(*)_FROM_users)--
=== RUN   TestSQLInjection_PartsListSearch/Payload:_admin'_OR_'1'='1'_/*
=== RUN   TestSQLInjection_PartsListSearch/Payload:_'_UNION_ALL_SELECT_NULL,NULL,NULL--
=== RUN   TestSQLInjection_PartsListSearch/Payload:_';_UPDATE_users_SET_role='admin'_WHERE_username='engineer'--
--- PASS: TestSQLInjection_PartsListSearch (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_'_OR_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_';_DROP_TABLE_parts-- (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_'_UNION_SELECT_*_FROM_users-- (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_admin'-- (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_'_OR_1=1-- (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_1'_AND_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_';_DELETE_FROM_inventory_WHERE_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_'_UNION_SELECT_NULL,_username,_password_hash_FROM_users-- (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_')_OR_('1'='1 (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_1'_OR_'1'='1'_/* (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_';_EXEC_xp_cmdshell('dir')-- (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_'_AND_1=(SELECT_COUNT(*)_FROM_users)-- (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_admin'_OR_'1'='1'_/* (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_'_UNION_ALL_SELECT_NULL,NULL,NULL-- (0.00s)
    --- PASS: TestSQLInjection_PartsListSearch/Payload:_';_UPDATE_users_SET_role='admin'_WHERE_username='engineer'-- (0.00s)
=== RUN   TestSQLInjection_AdvancedSearch
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_'_OR_'1'='1
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_';_DROP_TABLE_parts--
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_'_UNION_SELECT_*_FROM_users--
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_admin'--
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_'_OR_1=1--
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_1'_AND_'1'='1
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_';_DELETE_FROM_inventory_WHERE_'1'='1
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_'_UNION_SELECT_NULL,_username,_password_hash_FROM_users--
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_')_OR_('1'='1
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_1'_OR_'1'='1'_/*
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_';_EXEC_xp_cmdshell('dir')--
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_'_AND_1=(SELECT_COUNT(*)_FROM_users)--
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_admin'_OR_'1'='1'_/*
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_'_UNION_ALL_SELECT_NULL,NULL,NULL--
=== RUN   TestSQLInjection_AdvancedSearch/Payload:_';_UPDATE_users_SET_role='admin'_WHERE_username='engineer'--
--- PASS: TestSQLInjection_AdvancedSearch (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_'_OR_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_';_DROP_TABLE_parts-- (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_'_UNION_SELECT_*_FROM_users-- (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_admin'-- (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_'_OR_1=1-- (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_1'_AND_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_';_DELETE_FROM_inventory_WHERE_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_'_UNION_SELECT_NULL,_username,_password_hash_FROM_users-- (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_')_OR_('1'='1 (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_1'_OR_'1'='1'_/* (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_';_EXEC_xp_cmdshell('dir')-- (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_'_AND_1=(SELECT_COUNT(*)_FROM_users)-- (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_admin'_OR_'1'='1'_/* (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_'_UNION_ALL_SELECT_NULL,NULL,NULL-- (0.00s)
    --- PASS: TestSQLInjection_AdvancedSearch/Payload:_';_UPDATE_users_SET_role='admin'_WHERE_username='engineer'-- (0.00s)
=== RUN   TestSQLInjection_VerifyParameterizedQueries
--- PASS: TestSQLInjection_VerifyParameterizedQueries (0.00s)
=== RUN   TestSQLInjection_UNIONAttacks
=== RUN   TestSQLInjection_UNIONAttacks/UNION:_'_UNION_SELECT_username,_password_hash,_NULL_FROM_users--
=== RUN   TestSQLInjection_UNIONAttacks/UNION:_PART-001'_UNION_SELECT_username_FROM_users--
--- PASS: TestSQLInjection_UNIONAttacks (0.00s)
    --- PASS: TestSQLInjection_UNIONAttacks/UNION:_'_UNION_SELECT_username,_password_hash,_NULL_FROM_users-- (0.00s)
    --- PASS: TestSQLInjection_UNIONAttacks/UNION:_PART-001'_UNION_SELECT_username_FROM_users-- (0.00s)
=== RUN   TestSQLInjection_SecondOrder
--- PASS: TestSQLInjection_SecondOrder (0.00s)
=== RUN   TestSQLInjection_VendorSearch
=== RUN   TestSQLInjection_VendorSearch/Vendor:_'_OR_'1'='1
=== RUN   TestSQLInjection_VendorSearch/Vendor:_';_DROP_TABLE_parts--
=== RUN   TestSQLInjection_VendorSearch/Vendor:_'_UNION_SELECT_*_FROM_users--
=== RUN   TestSQLInjection_VendorSearch/Vendor:_admin'--
=== RUN   TestSQLInjection_VendorSearch/Vendor:_'_OR_1=1--
--- PASS: TestSQLInjection_VendorSearch (0.00s)
    --- PASS: TestSQLInjection_VendorSearch/Vendor:_'_OR_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_VendorSearch/Vendor:_';_DROP_TABLE_parts-- (0.00s)
    --- PASS: TestSQLInjection_VendorSearch/Vendor:_'_UNION_SELECT_*_FROM_users-- (0.00s)
    --- PASS: TestSQLInjection_VendorSearch/Vendor:_admin'-- (0.00s)
    --- PASS: TestSQLInjection_VendorSearch/Vendor:_'_OR_1=1-- (0.00s)
=== RUN   TestSQLInjection_InventoryNotes
=== RUN   TestSQLInjection_InventoryNotes/Notes:_'_OR_'1'='1
=== RUN   TestSQLInjection_InventoryNotes/Notes:_';_DROP_TABLE_parts--
=== RUN   TestSQLInjection_InventoryNotes/Notes:_'_UNION_SELECT_*_FROM_users--
=== RUN   TestSQLInjection_InventoryNotes/Notes:_admin'--
=== RUN   TestSQLInjection_InventoryNotes/Notes:_'_OR_1=1--
--- PASS: TestSQLInjection_InventoryNotes (0.00s)
    --- PASS: TestSQLInjection_InventoryNotes/Notes:_'_OR_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_InventoryNotes/Notes:_';_DROP_TABLE_parts-- (0.00s)
    --- PASS: TestSQLInjection_InventoryNotes/Notes:_'_UNION_SELECT_*_FROM_users-- (0.00s)
    --- PASS: TestSQLInjection_InventoryNotes/Notes:_admin'-- (0.00s)
    --- PASS: TestSQLInjection_InventoryNotes/Notes:_'_OR_1=1-- (0.00s)
=== RUN   TestSQLInjection_AuditLogSearch
=== RUN   TestSQLInjection_AuditLogSearch/Audit:_'_OR_'1'='1
=== RUN   TestSQLInjection_AuditLogSearch/Audit:_';_DROP_TABLE_parts--
=== RUN   TestSQLInjection_AuditLogSearch/Audit:_'_UNION_SELECT_*_FROM_users--
=== RUN   TestSQLInjection_AuditLogSearch/Audit:_admin'--
=== RUN   TestSQLInjection_AuditLogSearch/Audit:_'_OR_1=1--
--- PASS: TestSQLInjection_AuditLogSearch (0.00s)
    --- PASS: TestSQLInjection_AuditLogSearch/Audit:_'_OR_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_AuditLogSearch/Audit:_';_DROP_TABLE_parts-- (0.00s)
    --- PASS: TestSQLInjection_AuditLogSearch/Audit:_'_UNION_SELECT_*_FROM_users-- (0.00s)
    --- PASS: TestSQLInjection_AuditLogSearch/Audit:_admin'-- (0.00s)
    --- PASS: TestSQLInjection_AuditLogSearch/Audit:_'_OR_1=1-- (0.00s)
=== RUN   TestSQLInjection_WorkOrderNotes
=== RUN   TestSQLInjection_WorkOrderNotes/WO_Notes:_'_OR_'1'='1
=== RUN   TestSQLInjection_WorkOrderNotes/WO_Notes:_';_DROP_TABLE_parts--
=== RUN   TestSQLInjection_WorkOrderNotes/WO_Notes:_'_UNION_SELECT_*_FROM_users--
=== RUN   TestSQLInjection_WorkOrderNotes/WO_Notes:_admin'--
=== RUN   TestSQLInjection_WorkOrderNotes/WO_Notes:_'_OR_1=1--
--- PASS: TestSQLInjection_WorkOrderNotes (0.00s)
    --- PASS: TestSQLInjection_WorkOrderNotes/WO_Notes:_'_OR_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_WorkOrderNotes/WO_Notes:_';_DROP_TABLE_parts-- (0.00s)
    --- PASS: TestSQLInjection_WorkOrderNotes/WO_Notes:_'_UNION_SELECT_*_FROM_users-- (0.00s)
    --- PASS: TestSQLInjection_WorkOrderNotes/WO_Notes:_admin'-- (0.00s)
    --- PASS: TestSQLInjection_WorkOrderNotes/WO_Notes:_'_OR_1=1-- (0.00s)
=== RUN   TestSQLInjection_ECOFields
=== RUN   TestSQLInjection_ECOFields/ECO:_'_OR_'1'='1
=== RUN   TestSQLInjection_ECOFields/ECO:_';_DROP_TABLE_parts--
=== RUN   TestSQLInjection_ECOFields/ECO:_'_UNION_SELECT_*_FROM_users--
=== RUN   TestSQLInjection_ECOFields/ECO:_admin'--
=== RUN   TestSQLInjection_ECOFields/ECO:_'_OR_1=1--
--- PASS: TestSQLInjection_ECOFields (0.00s)
    --- PASS: TestSQLInjection_ECOFields/ECO:_'_OR_'1'='1 (0.00s)
    --- PASS: TestSQLInjection_ECOFields/ECO:_';_DROP_TABLE_parts-- (0.00s)
    --- PASS: TestSQLInjection_ECOFields/ECO:_'_UNION_SELECT_*_FROM_users-- (0.00s)
    --- PASS: TestSQLInjection_ECOFields/ECO:_admin'-- (0.00s)
    --- PASS: TestSQLInjection_ECOFields/ECO:_'_OR_1=1-- (0.00s)
=== RUN   TestAPIContractRoutes
--- PASS: TestAPIContractRoutes (0.01s)
=== RUN   TestFrontendRoutesExistInBackend
--- PASS: TestFrontendRoutesExistInBackend (0.00s)
=== RUN   TestOpenAPISpecValid
    api_contract_test.go:127: OpenAPI spec: 135 paths, 187 endpoints
--- PASS: TestOpenAPISpecValid (0.00s)
=== RUN   TestAPIHealth
=== RUN   TestAPIHealth/Health_Check
=== RUN   TestAPIHealth/Login
=== RUN   TestAPIHealth/Me
=== RUN   TestAPIHealth/Global_Search
=== RUN   TestAPIHealth/Scan_Lookup
=== RUN   TestAPIHealth/Dashboard
=== RUN   TestAPIHealth/Dashboard_Charts
=== RUN   TestAPIHealth/Low_Stock_Alerts
=== RUN   TestAPIHealth/Get_Dashboard_Widgets
=== RUN   TestAPIHealth/Audit_Log
=== RUN   TestAPIHealth/List_Parts
=== RUN   TestAPIHealth/List_Categories
=== RUN   TestAPIHealth/Check_IPN
=== RUN   TestAPIHealth/Get_Part
=== RUN   TestAPIHealth/Part_BOM
=== RUN   TestAPIHealth/Part_Cost
=== RUN   TestAPIHealth/Part_Where_Used
=== RUN   TestAPIHealth/Part_Changes
=== RUN   TestAPIHealth/List_All_Part_Changes
=== RUN   TestAPIHealth/List_Categories_2
=== RUN   TestAPIHealth/Calendar
=== RUN   TestAPIHealth/List_ECOs
=== RUN   TestAPIHealth/Get_ECO
=== RUN   TestAPIHealth/ECO_Part_Changes
=== RUN   TestAPIHealth/ECO_Revisions
=== RUN   TestAPIHealth/List_Docs
=== RUN   TestAPIHealth/Get_Doc
=== RUN   TestAPIHealth/Doc_Versions
=== RUN   TestAPIHealth/List_Vendors
=== RUN   TestAPIHealth/Get_Vendor
=== RUN   TestAPIHealth/List_Inventory
=== RUN   TestAPIHealth/Get_Inventory
=== RUN   TestAPIHealth/Inventory_History
=== RUN   TestAPIHealth/List_POs
=== RUN   TestAPIHealth/Get_PO
=== RUN   TestAPIHealth/List_Receiving
=== RUN   TestAPIHealth/List_Work_Orders
=== RUN   TestAPIHealth/Get_Work_Order
=== RUN   TestAPIHealth/Work_Order_BOM
=== RUN   TestAPIHealth/List_Tests
=== RUN   TestAPIHealth/List_NCRs
=== RUN   TestAPIHealth/Get_NCR
=== RUN   TestAPIHealth/List_Devices
=== RUN   TestAPIHealth/Get_Device
=== RUN   TestAPIHealth/Device_History
=== RUN   TestAPIHealth/Export_Devices
=== RUN   TestAPIHealth/List_Campaigns
=== RUN   TestAPIHealth/Get_Campaign
=== RUN   TestAPIHealth/Campaign_Progress
=== RUN   TestAPIHealth/Campaign_Devices
=== RUN   TestAPIHealth/List_Firmware
=== RUN   TestAPIHealth/List_Shipments
=== RUN   TestAPIHealth/Get_Shipment
=== RUN   TestAPIHealth/CAPA_Dashboard
=== RUN   TestAPIHealth/List_CAPAs
=== RUN   TestAPIHealth/Get_CAPA
=== RUN   TestAPIHealth/List_RMAs
=== RUN   TestAPIHealth/Get_RMA
=== RUN   TestAPIHealth/List_Quotes
=== RUN   TestAPIHealth/Get_Quote
=== RUN   TestAPIHealth/Quote_Cost
=== RUN   TestAPIHealth/List_API_Keys
=== RUN   TestAPIHealth/List_API_Keys_Alt
=== RUN   TestAPIHealth/List_Users
=== RUN   TestAPIHealth/List_Permissions
=== RUN   TestAPIHealth/List_Modules
=== RUN   TestAPIHealth/My_Permissions
=== RUN   TestAPIHealth/List_Attachments
=== RUN   TestAPIHealth/Get_Email_Config
=== RUN   TestAPIHealth/Get_Email_Subscriptions
=== RUN   TestAPIHealth/Email_Log
=== RUN   TestAPIHealth/General_Settings
=== RUN   TestAPIHealth/GitPLM_Settings
=== RUN   TestAPIHealth/Git_Docs_Settings
=== RUN   TestAPIHealth/Distributor_Settings
=== RUN   TestAPIHealth/Email_Settings
=== RUN   TestAPIHealth/Config
=== RUN   TestAPIHealth/Inventory_Valuation_Report
=== RUN   TestAPIHealth/Open_ECOs_Report
=== RUN   TestAPIHealth/WO_Throughput_Report
=== RUN   TestAPIHealth/Low_Stock_Report
=== RUN   TestAPIHealth/NCR_Summary_Report
=== RUN   TestAPIHealth/List_Notifications
=== RUN   TestAPIHealth/Notification_Preferences
=== RUN   TestAPIHealth/Notification_Types
=== RUN   TestAPIHealth/List_RFQs
=== RUN   TestAPIHealth/Get_RFQ
=== RUN   TestAPIHealth/RFQ_Compare
=== RUN   TestAPIHealth/RFQ_Email_Body
=== RUN   TestAPIHealth/RFQ_Dashboard
=== RUN   TestAPIHealth/List_Product_Pricing
=== RUN   TestAPIHealth/List_Cost_Analysis
=== RUN   TestAPIHealth/Get_Product_Pricing
=== RUN   TestAPIHealth/Product_Pricing_History
=== RUN   TestAPIHealth/Recent_Changes
=== RUN   TestAPIHealth/List_Undo
=== RUN   TestAPIHealth/List_Backups
=== RUN   TestAPIHealth/List_Field_Reports
=== RUN   TestAPIHealth/Get_Field_Report
=== RUN   TestAPIHealth/List_Sales_Orders
=== RUN   TestAPIHealth/Get_Sales_Order
=== RUN   TestAPIHealth/List_Invoices
=== RUN   TestAPIHealth/Get_Invoice
--- PASS: TestAPIHealth (0.17s)
    --- PASS: TestAPIHealth/Health_Check (0.00s)
    --- PASS: TestAPIHealth/Login (0.08s)
    --- PASS: TestAPIHealth/Me (0.00s)
    --- PASS: TestAPIHealth/Global_Search (0.00s)
    --- PASS: TestAPIHealth/Scan_Lookup (0.00s)
    --- PASS: TestAPIHealth/Dashboard (0.00s)
    --- PASS: TestAPIHealth/Dashboard_Charts (0.00s)
    --- PASS: TestAPIHealth/Low_Stock_Alerts (0.00s)
    --- PASS: TestAPIHealth/Get_Dashboard_Widgets (0.00s)
    --- PASS: TestAPIHealth/Audit_Log (0.00s)
    --- PASS: TestAPIHealth/List_Parts (0.00s)
    --- PASS: TestAPIHealth/List_Categories (0.00s)
    --- PASS: TestAPIHealth/Check_IPN (0.00s)
    --- PASS: TestAPIHealth/Get_Part (0.00s)
    --- PASS: TestAPIHealth/Part_BOM (0.00s)
    --- PASS: TestAPIHealth/Part_Cost (0.00s)
    --- PASS: TestAPIHealth/Part_Where_Used (0.00s)
    --- PASS: TestAPIHealth/Part_Changes (0.00s)
    --- PASS: TestAPIHealth/List_All_Part_Changes (0.00s)
    --- PASS: TestAPIHealth/List_Categories_2 (0.00s)
    --- PASS: TestAPIHealth/Calendar (0.00s)
    --- PASS: TestAPIHealth/List_ECOs (0.00s)
    --- PASS: TestAPIHealth/Get_ECO (0.00s)
    --- PASS: TestAPIHealth/ECO_Part_Changes (0.00s)
    --- PASS: TestAPIHealth/ECO_Revisions (0.00s)
    --- PASS: TestAPIHealth/List_Docs (0.00s)
    --- PASS: TestAPIHealth/Get_Doc (0.00s)
    --- PASS: TestAPIHealth/Doc_Versions (0.00s)
    --- PASS: TestAPIHealth/List_Vendors (0.00s)
    --- PASS: TestAPIHealth/Get_Vendor (0.00s)
    --- PASS: TestAPIHealth/List_Inventory (0.00s)
    --- PASS: TestAPIHealth/Get_Inventory (0.00s)
    --- PASS: TestAPIHealth/Inventory_History (0.00s)
    --- PASS: TestAPIHealth/List_POs (0.00s)
    --- PASS: TestAPIHealth/Get_PO (0.00s)
    --- PASS: TestAPIHealth/List_Receiving (0.00s)
    --- PASS: TestAPIHealth/List_Work_Orders (0.00s)
    --- PASS: TestAPIHealth/Get_Work_Order (0.00s)
    --- PASS: TestAPIHealth/Work_Order_BOM (0.00s)
    --- PASS: TestAPIHealth/List_Tests (0.00s)
    --- PASS: TestAPIHealth/List_NCRs (0.00s)
    --- PASS: TestAPIHealth/Get_NCR (0.00s)
    --- PASS: TestAPIHealth/List_Devices (0.00s)
    --- PASS: TestAPIHealth/Get_Device (0.00s)
    --- PASS: TestAPIHealth/Device_History (0.00s)
    --- PASS: TestAPIHealth/Export_Devices (0.00s)
    --- PASS: TestAPIHealth/List_Campaigns (0.00s)
    --- PASS: TestAPIHealth/Get_Campaign (0.00s)
    --- PASS: TestAPIHealth/Campaign_Progress (0.00s)
    --- PASS: TestAPIHealth/Campaign_Devices (0.00s)
    --- PASS: TestAPIHealth/List_Firmware (0.00s)
    --- PASS: TestAPIHealth/List_Shipments (0.00s)
    --- PASS: TestAPIHealth/Get_Shipment (0.00s)
    --- PASS: TestAPIHealth/CAPA_Dashboard (0.00s)
    --- PASS: TestAPIHealth/List_CAPAs (0.00s)
    --- PASS: TestAPIHealth/Get_CAPA (0.00s)
    --- PASS: TestAPIHealth/List_RMAs (0.00s)
    --- PASS: TestAPIHealth/Get_RMA (0.00s)
    --- PASS: TestAPIHealth/List_Quotes (0.00s)
    --- PASS: TestAPIHealth/Get_Quote (0.00s)
    --- PASS: TestAPIHealth/Quote_Cost (0.00s)
    --- PASS: TestAPIHealth/List_API_Keys (0.00s)
    --- PASS: TestAPIHealth/List_API_Keys_Alt (0.00s)
    --- PASS: TestAPIHealth/List_Users (0.00s)
    --- PASS: TestAPIHealth/List_Permissions (0.00s)
    --- PASS: TestAPIHealth/List_Modules (0.00s)
    --- PASS: TestAPIHealth/My_Permissions (0.00s)
    --- PASS: TestAPIHealth/List_Attachments (0.00s)
    --- PASS: TestAPIHealth/Get_Email_Config (0.00s)
    --- PASS: TestAPIHealth/Get_Email_Subscriptions (0.00s)
    --- PASS: TestAPIHealth/Email_Log (0.00s)
    --- PASS: TestAPIHealth/General_Settings (0.00s)
    --- PASS: TestAPIHealth/GitPLM_Settings (0.00s)
    --- PASS: TestAPIHealth/Git_Docs_Settings (0.00s)
    --- PASS: TestAPIHealth/Distributor_Settings (0.00s)
    --- PASS: TestAPIHealth/Email_Settings (0.00s)
    --- PASS: TestAPIHealth/Config (0.00s)
    --- PASS: TestAPIHealth/Inventory_Valuation_Report (0.00s)
    --- PASS: TestAPIHealth/Open_ECOs_Report (0.00s)
    --- PASS: TestAPIHealth/WO_Throughput_Report (0.00s)
    --- PASS: TestAPIHealth/Low_Stock_Report (0.00s)
    --- PASS: TestAPIHealth/NCR_Summary_Report (0.00s)
    --- PASS: TestAPIHealth/List_Notifications (0.00s)
    --- PASS: TestAPIHealth/Notification_Preferences (0.00s)
    --- PASS: TestAPIHealth/Notification_Types (0.00s)
    --- PASS: TestAPIHealth/List_RFQs (0.00s)
    --- PASS: TestAPIHealth/Get_RFQ (0.00s)
    --- PASS: TestAPIHealth/RFQ_Compare (0.00s)
    --- PASS: TestAPIHealth/RFQ_Email_Body (0.00s)
    --- PASS: TestAPIHealth/RFQ_Dashboard (0.00s)
    --- PASS: TestAPIHealth/List_Product_Pricing (0.00s)
    --- PASS: TestAPIHealth/List_Cost_Analysis (0.00s)
    --- PASS: TestAPIHealth/Get_Product_Pricing (0.00s)
    --- PASS: TestAPIHealth/Product_Pricing_History (0.00s)
    --- PASS: TestAPIHealth/Recent_Changes (0.00s)
    --- PASS: TestAPIHealth/List_Undo (0.00s)
    --- PASS: TestAPIHealth/List_Backups (0.00s)
    --- PASS: TestAPIHealth/List_Field_Reports (0.00s)
    --- PASS: TestAPIHealth/Get_Field_Report (0.00s)
    --- PASS: TestAPIHealth/List_Sales_Orders (0.00s)
    --- PASS: TestAPIHealth/Get_Sales_Order (0.00s)
    --- PASS: TestAPIHealth/List_Invoices (0.00s)
    --- PASS: TestAPIHealth/Get_Invoice (0.00s)
=== RUN   TestConcurrentInventoryUpdates_TwoGoroutines
--- PASS: TestConcurrentInventoryUpdates_TwoGoroutines (0.00s)
=== RUN   TestConcurrentInventoryUpdates_TenGoroutines
    concurrency_inventory_test.go:56: Failed to create inventory table: SQL logic error: table inventory already exists (1)
--- FAIL: TestConcurrentInventoryUpdates_TenGoroutines (0.00s)
=== RUN   TestConcurrentInventoryUpdates_DifferentParts
    concurrency_inventory_test.go:56: Failed to create inventory table: SQL logic error: table inventory already exists (1)
--- FAIL: TestConcurrentInventoryUpdates_DifferentParts (0.00s)
=== RUN   TestConcurrentInventoryUpdates_MixedOperations
    concurrency_inventory_test.go:56: Failed to create inventory table: SQL logic error: table inventory already exists (1)
--- FAIL: TestConcurrentInventoryUpdates_MixedOperations (0.00s)
=== RUN   TestConcurrentInventoryRead_WhileUpdating
    concurrency_inventory_test.go:56: Failed to create inventory table: SQL logic error: table inventory already exists (1)
--- FAIL: TestConcurrentInventoryRead_WhileUpdating (0.00s)
=== RUN   TestForeignKeysEnabled
--- PASS: TestForeignKeysEnabled (0.05s)
=== RUN   TestFK_PORequiresVendor
--- PASS: TestFK_PORequiresVendor (0.05s)
=== RUN   TestFK_POLineRequiresPO
--- PASS: TestFK_POLineRequiresPO (0.05s)
=== RUN   TestFK_CascadeDeletePOLines
--- PASS: TestFK_CascadeDeletePOLines (0.05s)
=== RUN   TestFK_RestrictVendorDeleteWithPO
--- PASS: TestFK_RestrictVendorDeleteWithPO (0.05s)
=== RUN   TestFK_QuoteLineCascade
--- PASS: TestFK_QuoteLineCascade (0.05s)
=== RUN   TestFK_WOSerialRequiresWO
--- PASS: TestFK_WOSerialRequiresWO (0.05s)
=== RUN   TestFK_SessionRequiresUser
--- PASS: TestFK_SessionRequiresUser (0.05s)
=== RUN   TestFK_ShipmentLineCascade
--- PASS: TestFK_ShipmentLineCascade (0.05s)
=== RUN   TestFK_EcoRevisionRequiresEco
--- PASS: TestFK_EcoRevisionRequiresEco (0.05s)
=== RUN   TestFK_DocumentVersionRequiresDocument
--- PASS: TestFK_DocumentVersionRequiresDocument (0.05s)
=== RUN   TestFK_RFQVendorRequiresVendor
--- PASS: TestFK_RFQVendorRequiresVendor (0.05s)
=== RUN   TestFK_CampaignDeviceRequiresCampaign
--- PASS: TestFK_CampaignDeviceRequiresCampaign (0.05s)
=== RUN   TestFK_ReceivingInspectionRequiresPO
--- PASS: TestFK_ReceivingInspectionRequiresPO (0.05s)
=== RUN   TestCheck_ECOInvalidStatus
--- PASS: TestCheck_ECOInvalidStatus (0.05s)
=== RUN   TestCheck_WorkOrderInvalidPriority
--- PASS: TestCheck_WorkOrderInvalidPriority (0.05s)
=== RUN   TestCheck_NegativeInventory
--- PASS: TestCheck_NegativeInventory (0.05s)
=== RUN   TestCheck_NegativeUnitPrice
--- PASS: TestCheck_NegativeUnitPrice (0.05s)
=== RUN   TestCheck_ZeroQtyOrdered
--- PASS: TestCheck_ZeroQtyOrdered (0.05s)
=== RUN   TestCheck_TestRecordInvalidResult
--- PASS: TestCheck_TestRecordInvalidResult (0.05s)
=== RUN   TestCheck_VendorNegativeLeadTime
--- PASS: TestCheck_VendorNegativeLeadTime (0.05s)
=== RUN   TestCheck_NCRInvalidSeverity
--- PASS: TestCheck_NCRInvalidSeverity (0.05s)
=== RUN   TestCheck_DeviceInvalidStatus
--- PASS: TestCheck_DeviceInvalidStatus (0.05s)
=== RUN   TestUnique_WOSerialNumber
--- PASS: TestUnique_WOSerialNumber (0.05s)
=== RUN   TestUnique_MarketPricing
--- PASS: TestUnique_MarketPricing (0.05s)
=== RUN   TestIndexesExist
--- PASS: TestIndexesExist (0.05s)
=== RUN   TestValidDataInserts
--- PASS: TestValidDataInserts (0.05s)
=== RUN   TestDatabaseMigrations
    db_migration_test.go:103: ✓ All 51 required tables exist
    db_migration_test.go:104: ✓ All 17 critical columns exist
--- PASS: TestDatabaseMigrations (0.01s)
=== RUN   TestHandlerQueryConsistency
    db_migration_test.go:212: ✓ 11/11 handler queries verified
--- PASS: TestHandlerQueryConsistency (0.01s)
=== RUN   TestMigrationIdempotency
    db_migration_test.go:257: ✓ Migrations are idempotent
--- PASS: TestMigrationIdempotency (0.01s)
=== RUN   TestForeignKeyConstraints
    db_migration_test.go:358: ✓ Foreign key constraints verified
--- PASS: TestForeignKeyConstraints (0.01s)
=== RUN   TestGetEmailSubscriptions
--- PASS: TestGetEmailSubscriptions (0.33s)
=== RUN   TestUpdateEmailSubscriptions
--- PASS: TestUpdateEmailSubscriptions (0.33s)
=== RUN   TestIsUserSubscribed_Default
--- PASS: TestIsUserSubscribed_Default (0.24s)
=== RUN   TestIsUserSubscribed_Disabled
--- PASS: TestIsUserSubscribed_Disabled (0.24s)
=== RUN   TestEmailOnECOApproved_WithLog
--- PASS: TestEmailOnECOApproved_WithLog (0.24s)
=== RUN   TestEmailOnECOApproved_UnsubscribedUser
--- PASS: TestEmailOnECOApproved_UnsubscribedUser (0.24s)
=== RUN   TestEmailOnECOImplemented
--- PASS: TestEmailOnECOImplemented (0.24s)
=== RUN   TestEmailOnLowStock_WithLog
--- PASS: TestEmailOnLowStock_WithLog (0.24s)
=== RUN   TestEmailOnOverdueWorkOrder
--- PASS: TestEmailOnOverdueWorkOrder (0.24s)
=== RUN   TestEmailOnPOReceived
--- PASS: TestEmailOnPOReceived (0.25s)
=== RUN   TestEmailOnNCRCreated
--- PASS: TestEmailOnNCRCreated (0.24s)
=== RUN   TestEmailLogIncludesEventType
--- PASS: TestEmailLogIncludesEventType (0.32s)
=== RUN   TestSendEventEmail_SkipsUnsubscribed
--- PASS: TestSendEventEmail_SkipsUnsubscribed (0.24s)
=== RUN   TestEmailSubscriptionsAPI_Roundtrip
--- PASS: TestEmailSubscriptionsAPI_Roundtrip (0.32s)
=== RUN   TestDatabaseConnectionLost
    error_recovery_test.go:123: ✅ Database connection failure handled gracefully with error: sql: database is closed
--- PASS: TestDatabaseConnectionLost (0.00s)
=== RUN   TestDatabaseBusyTimeout
    error_recovery_test.go:165: ✅ Database busy condition handled (error returned)
--- PASS: TestDatabaseBusyTimeout (0.00s)
=== RUN   TestInvalidJSONRequest
=== RUN   TestInvalidJSONRequest/Completely_invalid_JSON
    error_recovery_test.go:231: ✅ Invalid JSON handled: invalid body
=== RUN   TestInvalidJSONRequest/Malformed_JSON_with_extra_comma
    error_recovery_test.go:231: ✅ Invalid JSON handled: invalid body
=== RUN   TestInvalidJSONRequest/Not_JSON_at_all
    error_recovery_test.go:231: ✅ Invalid JSON handled: invalid body
=== RUN   TestInvalidJSONRequest/Empty_body
    error_recovery_test.go:231: ✅ Invalid JSON handled: invalid body
--- PASS: TestInvalidJSONRequest (0.00s)
    --- PASS: TestInvalidJSONRequest/Completely_invalid_JSON (0.00s)
    --- PASS: TestInvalidJSONRequest/Malformed_JSON_with_extra_comma (0.00s)
    --- PASS: TestInvalidJSONRequest/Not_JSON_at_all (0.00s)
    --- PASS: TestInvalidJSONRequest/Empty_body (0.00s)
=== RUN   TestMissingRequiredFields
=== RUN   TestMissingRequiredFields/Vendor_without_name
    error_recovery_test.go:290: ✅ Missing field 'name' properly validated: name: is required
=== RUN   TestMissingRequiredFields/Vendor_with_empty_name
    error_recovery_test.go:290: ✅ Missing field 'name' properly validated: name: is required
=== RUN   TestMissingRequiredFields/Vendor_with_whitespace-only_name
    error_recovery_test.go:290: ✅ Missing field 'name' properly validated: name: is required
--- PASS: TestMissingRequiredFields (0.00s)
    --- PASS: TestMissingRequiredFields/Vendor_without_name (0.00s)
    --- PASS: TestMissingRequiredFields/Vendor_with_empty_name (0.00s)
    --- PASS: TestMissingRequiredFields/Vendor_with_whitespace-only_name (0.00s)
=== RUN   TestForeignKeyConstraintViolation
    error_recovery_test.go:337: ✅ Foreign key constraint properly enforced: constraint failed: FOREIGN KEY constraint failed (1811)
--- PASS: TestForeignKeyConstraintViolation (0.00s)
=== RUN   TestTransactionRollbackOnError
    error_recovery_test.go:387: ✅ Transaction rollback on constraint violation works correctly
--- PASS: TestTransactionRollbackOnError (0.00s)
=== RUN   TestNegativeQuantityRejection
=== RUN   TestNegativeQuantityRejection/Negative_qty_on_hand
    error_recovery_test.go:430: ✅ CHECK constraint enforced: constraint failed: CHECK constraint failed: qty_on_hand >= 0 (275)
=== RUN   TestNegativeQuantityRejection/Negative_qty_reserved
    error_recovery_test.go:430: ✅ CHECK constraint enforced: constraint failed: CHECK constraint failed: qty_reserved >= 0 (275)
=== RUN   TestNegativeQuantityRejection/Negative_reorder_point
    error_recovery_test.go:430: ✅ CHECK constraint enforced: constraint failed: CHECK constraint failed: reorder_point >= 0 (275)
=== RUN   TestNegativeQuantityRejection/Zero_qty_on_hand
=== RUN   TestNegativeQuantityRejection/Positive_qty_on_hand
--- PASS: TestNegativeQuantityRejection (0.00s)
    --- PASS: TestNegativeQuantityRejection/Negative_qty_on_hand (0.00s)
    --- PASS: TestNegativeQuantityRejection/Negative_qty_reserved (0.00s)
    --- PASS: TestNegativeQuantityRejection/Negative_reorder_point (0.00s)
    --- PASS: TestNegativeQuantityRejection/Zero_qty_on_hand (0.00s)
    --- PASS: TestNegativeQuantityRejection/Positive_qty_on_hand (0.00s)
=== RUN   TestVeryLongFilePath
    error_recovery_test.go:453: ✅ Very long file path properly rejected by OS: open /var/folders/56/n92zs44s7cd7262ym00jt2bm0000gn/T/TestVeryLongFilePath2146930802/001/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.txt: file name too long
--- PASS: TestVeryLongFilePath (0.00s)
=== RUN   TestDiskFullSimulation
    error_recovery_test.go:486: ✅ Write error properly detected: write /var/folders/56/n92zs44s7cd7262ym00jt2bm0000gn/T/diskfull-test-3961663685.txt: file already closed
--- PASS: TestDiskFullSimulation (0.00s)
=== RUN   TestNetworkTimeoutHandling
    error_recovery_test.go:527: ✅ Request completed without hanging
--- PASS: TestNetworkTimeoutHandling (0.00s)
=== RUN   TestMultipleValidationErrors
    error_recovery_test.go:570: ✅ Validation errors reported: name: is required; contact_email: must be a valid email address
--- PASS: TestMultipleValidationErrors (0.00s)
=== RUN   TestDuplicateKeyError
    error_recovery_test.go:599: ✅ Duplicate key properly rejected: constraint failed: UNIQUE constraint failed: vendors.name (2067)
--- PASS: TestDuplicateKeyError (0.00s)
=== RUN   TestNilDatabaseConnection
    error_recovery_test.go:631: ✅ Nil database handled gracefully (status 503): database not initialized
--- PASS: TestNilDatabaseConnection (0.00s)
=== RUN   TestUserFriendlyErrorMessages
=== RUN   TestUserFriendlyErrorMessages/Empty_name_field
    error_recovery_test.go:683: ✅ User-friendly error message: name: is required
--- PASS: TestUserFriendlyErrorMessages (0.00s)
    --- PASS: TestUserFriendlyErrorMessages/Empty_name_field (0.00s)
=== RUN   TestAuditLog_Vendor_Create
    handler_audit_log_test.go:337: Created vendor ID: V-001
    handler_audit_log_test.go:358: ✓ Vendor CREATE audit log verified: V-001
--- PASS: TestAuditLog_Vendor_Create (0.00s)
=== RUN   TestAuditLog_Vendor_Update
    handler_audit_log_test.go:399: ✓ Vendor UPDATE audit log verified
--- PASS: TestAuditLog_Vendor_Update (0.00s)
=== RUN   TestAuditLog_Vendor_Delete
    handler_audit_log_test.go:433: ✓ Vendor DELETE audit log verified
--- PASS: TestAuditLog_Vendor_Delete (0.00s)
=== RUN   TestAuditLog_ECO_Create
    handler_audit_log_test.go:475: Created ECO ID: ECO-2026-001
    handler_audit_log_test.go:484: ✓ ECO CREATE audit log verified: ECO-2026-001
--- PASS: TestAuditLog_ECO_Create (0.00s)
=== RUN   TestAuditLog_ECO_Approve
    handler_audit_log_test.go:544: ✓ ECO APPROVE audit log verified with user tracking
--- PASS: TestAuditLog_ECO_Approve (0.00s)
=== RUN   TestAuditLog_PurchaseOrder_Create
    handler_audit_log_test.go:602: Created PO ID: PO-2026-0001
    handler_audit_log_test.go:631: ✓ PO CREATE audit log verified with price tracking: PO-2026-0001
--- PASS: TestAuditLog_PurchaseOrder_Create (0.00s)
=== RUN   TestAuditLog_PurchaseOrder_Update_PriceChange
    handler_audit_log_test.go:685: ✓ PO UPDATE audit log verified
--- PASS: TestAuditLog_PurchaseOrder_Update_PriceChange (0.00s)
=== RUN   TestAuditLog_Inventory_Adjust
    handler_audit_log_test.go:748: ✓ Inventory ADJUST audit log verified
--- PASS: TestAuditLog_Inventory_Adjust (0.00s)
=== RUN   TestAuditLog_BeforeAfter_Values
    handler_audit_log_test.go:822: ✓ Before/after values verified in audit log
--- PASS: TestAuditLog_BeforeAfter_Values (0.00s)
=== RUN   TestAuditLog_Search_Filter
    handler_audit_log_test.go:894: ✓ Audit log search and filtering verified
--- PASS: TestAuditLog_Search_Filter (0.00s)
=== RUN   TestAuditLog_IPAddress_UserAgent
    handler_audit_log_test.go:948: ✓ IP address and user agent tracking verified
--- PASS: TestAuditLog_IPAddress_UserAgent (0.00s)
=== RUN   TestAuditLog_Completeness_AllOperations
    handler_audit_log_test.go:1014: ✓ Audit log completeness verified for all CRUD operations
--- PASS: TestAuditLog_Completeness_AllOperations (0.00s)
=== RUN   TestHandleLogin_Success
--- PASS: TestHandleLogin_Success (0.15s)
=== RUN   TestHandleLogin_InvalidUsername
--- PASS: TestHandleLogin_InvalidUsername (0.08s)
=== RUN   TestHandleLogin_InvalidPassword
--- PASS: TestHandleLogin_InvalidPassword (0.15s)
=== RUN   TestHandleLogin_InactiveUser
--- PASS: TestHandleLogin_InactiveUser (0.15s)
=== RUN   TestHandleLogin_RateLimiting
--- PASS: TestHandleLogin_RateLimiting (0.46s)
=== RUN   TestHandleLogin_RateLimitPerIP
--- PASS: TestHandleLogin_RateLimitPerIP (0.53s)
=== RUN   TestHandleLogin_InvalidJSON
--- PASS: TestHandleLogin_InvalidJSON (0.00s)
=== RUN   TestHandleLogout
--- PASS: TestHandleLogout (0.08s)
=== RUN   TestHandleLogout_NoCookie
--- PASS: TestHandleLogout_NoCookie (0.00s)
=== RUN   TestHandleMe_ValidSession
--- PASS: TestHandleMe_ValidSession (0.08s)
=== RUN   TestHandleMe_NoCookie
--- PASS: TestHandleMe_NoCookie (0.00s)
=== RUN   TestHandleMe_InvalidToken
--- PASS: TestHandleMe_InvalidToken (0.00s)
=== RUN   TestHandleMe_ExpiredSession
--- PASS: TestHandleMe_ExpiredSession (0.08s)
=== RUN   TestHandleChangePassword_Success
    handler_auth_test.go:517: Expected status 200, got 400: {"error":"SQL logic error: no such table: password_history (1)"}
    handler_auth_test.go:528: New password doesn't match
--- FAIL: TestHandleChangePassword_Success (0.30s)
=== RUN   TestHandleChangePassword_WrongCurrentPassword
--- PASS: TestHandleChangePassword_WrongCurrentPassword (0.15s)
=== RUN   TestHandleChangePassword_PasswordTooShort
--- PASS: TestHandleChangePassword_PasswordTooShort (0.08s)
=== RUN   TestHandleChangePassword_MissingFields
=== RUN   TestHandleChangePassword_MissingFields/missing_new_password
=== RUN   TestHandleChangePassword_MissingFields/missing_current_password
=== RUN   TestHandleChangePassword_MissingFields/empty_strings
--- PASS: TestHandleChangePassword_MissingFields (0.08s)
    --- PASS: TestHandleChangePassword_MissingFields/missing_new_password (0.00s)
    --- PASS: TestHandleChangePassword_MissingFields/missing_current_password (0.00s)
    --- PASS: TestHandleChangePassword_MissingFields/empty_strings (0.00s)
=== RUN   TestHandleChangePassword_Unauthorized
--- PASS: TestHandleChangePassword_Unauthorized (0.00s)
=== RUN   TestGenerateToken
--- PASS: TestGenerateToken (0.00s)
=== RUN   TestGetClientIP_DirectConnection
--- PASS: TestGetClientIP_DirectConnection (0.00s)
=== RUN   TestGetClientIP_XForwardedFor
--- PASS: TestGetClientIP_XForwardedFor (0.00s)
=== RUN   TestLoginRateLimitReset
--- PASS: TestLoginRateLimitReset (0.00s)
=== RUN   TestHandleLogin_CleansExpiredSessions
--- PASS: TestHandleLogin_CleansExpiredSessions (0.15s)
=== RUN   TestCreateBackup
--- PASS: TestCreateBackup (0.33s)
=== RUN   TestListBackups
--- PASS: TestListBackups (0.33s)
=== RUN   TestListBackupsEmpty
--- PASS: TestListBackupsEmpty (0.32s)
=== RUN   TestDeleteBackup
--- PASS: TestDeleteBackup (0.33s)
=== RUN   TestDeleteBackupNotFound
--- PASS: TestDeleteBackupNotFound (0.32s)
=== RUN   TestDeleteBackupInvalidFilename
--- PASS: TestDeleteBackupInvalidFilename (0.32s)
=== RUN   TestDownloadBackup
--- PASS: TestDownloadBackup (0.33s)
=== RUN   TestDownloadBackupNotFound
--- PASS: TestDownloadBackupNotFound (0.32s)
=== RUN   TestDownloadBackupPathTraversal
--- PASS: TestDownloadBackupPathTraversal (0.32s)
=== RUN   TestRestoreBackup
--- PASS: TestRestoreBackup (1.47s)
=== RUN   TestRestoreBackupNotFound
--- PASS: TestRestoreBackupNotFound (0.32s)
=== RUN   TestRestoreBackupMissingFilename
--- PASS: TestRestoreBackupMissingFilename (0.32s)
=== RUN   TestRestoreBackupPathTraversal
--- PASS: TestRestoreBackupPathTraversal (0.32s)
=== RUN   TestCleanOldBackups
2026/02/20 04:29:24 Removed old backup: zrp-backup-2025-01-01T00-00-00.db
2026/02/20 04:29:24 Removed old backup: zrp-backup-2025-01-02T00-00-00.db
--- PASS: TestCleanOldBackups (0.32s)
=== RUN   TestCleanOldBackupsUnderRetention
--- PASS: TestCleanOldBackupsUnderRetention (0.32s)
=== RUN   TestBOMCost_SimpleBOM
audit log error: SQL logic error: no such table: audit_log (1)
--- PASS: TestBOMCost_SimpleBOM (0.00s)
=== RUN   TestBOMCost_NestedBOM
audit log error: SQL logic error: no such table: audit_log (1)
--- PASS: TestBOMCost_NestedBOM (0.00s)
=== RUN   TestBOMCost_MissingCostData
audit log error: SQL logic error: no such table: audit_log (1)
--- PASS: TestBOMCost_MissingCostData (0.00s)
=== RUN   TestBOMCost_CircularBOM
audit log error: SQL logic error: no such table: audit_log (1)
--- PASS: TestBOMCost_CircularBOM (0.00s)
=== RUN   TestBOMCost_LargeBOM
audit log error: SQL logic error: no such table: audit_log (1)
--- PASS: TestBOMCost_LargeBOM (0.00s)
=== RUN   TestBOMCost_EmptyBOM
audit log error: SQL logic error: no such table: audit_log (1)
--- PASS: TestBOMCost_EmptyBOM (0.00s)
=== RUN   TestBOMCost_NonAssemblyPart
audit log error: SQL logic error: no such table: audit_log (1)
--- PASS: TestBOMCost_NonAssemblyPart (0.00s)
=== RUN   TestBulkUpdateInventoryLocation
--- PASS: TestBulkUpdateInventoryLocation (0.32s)
=== RUN   TestBulkUpdateInventoryReorderPoint
--- PASS: TestBulkUpdateInventoryReorderPoint (0.32s)
=== RUN   TestBulkUpdateInventoryDisallowedField
--- PASS: TestBulkUpdateInventoryDisallowedField (0.32s)
=== RUN   TestBulkUpdateInventoryEmptyIDs
--- PASS: TestBulkUpdateInventoryEmptyIDs (0.32s)
=== RUN   TestBulkUpdateInventoryNotFound
--- PASS: TestBulkUpdateInventoryNotFound (0.32s)
=== RUN   TestBulkUpdateWorkOrdersStatus
--- PASS: TestBulkUpdateWorkOrdersStatus (0.32s)
=== RUN   TestBulkUpdateWorkOrdersPriority
--- PASS: TestBulkUpdateWorkOrdersPriority (0.32s)
=== RUN   TestBulkUpdateWorkOrdersInvalidStatus
--- PASS: TestBulkUpdateWorkOrdersInvalidStatus (0.32s)
=== RUN   TestBulkUpdateWorkOrdersDisallowedField
--- PASS: TestBulkUpdateWorkOrdersDisallowedField (0.32s)
=== RUN   TestBulkUpdateDevicesStatus
--- PASS: TestBulkUpdateDevicesStatus (0.32s)
=== RUN   TestBulkUpdateDevicesCustomer
--- PASS: TestBulkUpdateDevicesCustomer (0.32s)
=== RUN   TestBulkUpdateDevicesInvalidStatus
--- PASS: TestBulkUpdateDevicesInvalidStatus (0.32s)
=== RUN   TestBulkUpdateDevicesDisallowedField
--- PASS: TestBulkUpdateDevicesDisallowedField (0.32s)
=== RUN   TestCAPACRUD
--- PASS: TestCAPACRUD (0.32s)
=== RUN   TestCAPACloseRequiresEffectivenessAndApproval
--- PASS: TestCAPACloseRequiresEffectivenessAndApproval (0.32s)
=== RUN   TestCAPADashboard
--- PASS: TestCAPADashboard (0.24s)
=== RUN   TestCAPAGetNotFound
--- PASS: TestCAPAGetNotFound (0.24s)
=== RUN   TestCAPAPreventiveType
--- PASS: TestCAPAPreventiveType (0.24s)
=== RUN   TestCAPADefaultType
--- PASS: TestCAPADefaultType (0.24s)
=== RUN   TestRecordChangeAndRecentChanges
--- PASS: TestRecordChangeAndRecentChanges (0.32s)
=== RUN   TestUndoChangeCreate
--- PASS: TestUndoChangeCreate (0.32s)
=== RUN   TestUndoChangeUpdate
--- PASS: TestUndoChangeUpdate (0.32s)
=== RUN   TestUndoChangeDelete
--- PASS: TestUndoChangeDelete (0.32s)
=== RUN   TestUndoAlreadyUndone
--- PASS: TestUndoAlreadyUndone (0.32s)
=== RUN   TestUndoChangeNotFound
--- PASS: TestUndoChangeNotFound (0.32s)
=== RUN   TestUndoChangeInvalidID
--- PASS: TestUndoChangeInvalidID (0.32s)
=== RUN   TestRecentChangesEmpty
--- PASS: TestRecentChangesEmpty (0.32s)
=== RUN   TestCircularBOM_DirectSelfReference
    handler_circular_bom_test.go:173: Direct circular BOM response: map[children:[map[children:[] description:100Ω Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description:100Ω Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description:100Ω Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description:100Ω Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description:100Ω Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description:100Ω Resistor ipn:RES-001 qty:1 ref:R1] map[children:[] description:(max depth reached) ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF qty:1 ref:A1]] description:Self-reference ipn:PCA-SELF]
audit log error: SQL logic error: no such table: audit_log (1)
    handler_circular_bom_test.go:198: Direct circular BOM cost: 0.60
--- PASS: TestCircularBOM_DirectSelfReference (0.00s)
=== RUN   TestCircularBOM_IndirectReference
    handler_circular_bom_test.go:264: Indirect circular BOM response (should be depth-limited): map[children:[map[children:[] description:100Ω Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description: ipn:CAP-001 qty:1 ref:C1] map[children:[map[children:[] description: ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description: ipn:CAP-001 qty:1 ref:C1] map[children:[map[children:[] description:100Ω Resistor ipn:RES-001 qty:1 ref:R1] map[children:[map[children:[] description: ipn:CAP-001 qty:1 ref:C1] map[children:[] description:(max depth reached) ipn:PCA-A qty:1 ref:A1]] description: ipn:PCA-B qty:1 ref:A1]] description: ipn:PCA-A qty:1 ref:A1]] description: ipn:PCA-B qty:1 ref:A1]] description: ipn:PCA-A qty:1 ref:A1]] description: ipn:PCA-B qty:1 ref:A1]] description: ipn:PCA-A]
audit log error: SQL logic error: no such table: audit_log (1)
    handler_circular_bom_test.go:289: Indirect circular BOM cost: 1.05
--- PASS: TestCircularBOM_IndirectReference (0.00s)
=== RUN   TestCircularBOM_DeepNesting
    handler_circular_bom_test.go:357: Deep nested BOM (15 levels requested): {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "PCA-LEVEL-06",
                                  "qty": 1
                                }
                              ],
                              "description": "",
                              "ipn": "PCA-LEVEL-05",
                              "qty": 1
                            }
                          ],
                          "description": "Assembly Level 4",
                          "ipn": "PCA-LEVEL-04",
                          "qty": 1
                        }
                      ],
                      "description": "",
                      "ipn": "PCA-LEVEL-03",
                      "qty": 1
                    }
                  ],
                  "description": "",
                  "ipn": "PCA-LEVEL-02",
                  "qty": 1
                }
              ],
              "description": "",
              "ipn": "PCA-LEVEL-01",
              "qty": 1
            }
          ],
          "description": "Assembly Level 0",
          "ipn": "PCA-LEVEL-00"
        }
audit log error: SQL logic error: no such table: audit_log (1)
    handler_circular_bom_test.go:383: Deep nested BOM cost: 0.00
--- PASS: TestCircularBOM_DeepNesting (0.01s)
=== RUN   TestCircularBOM_ComplexCircular
    handler_circular_bom_test.go:462: Complex circular BOM: {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "ASY-ROOT",
                                  "qty": 1
                                }
                              ],
                              "description": "Sub-Assembly C",
                              "ipn": "PCA-C",
                              "qty": 1
                            }
                          ],
                          "description": "Sub-Assembly A",
                          "ipn": "PCA-A",
                          "qty": 1
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "ASY-ROOT",
                                  "qty": 1
                                }
                              ],
                              "description": "Sub-Assembly C",
                              "ipn": "PCA-C",
                              "qty": 2
                            }
                          ],
                          "description": "Sub-Assembly B",
                          "ipn": "PCA-B",
                          "qty": 1
                        },
                        {
                          "children": [],
                          "description": "Resistor",
                          "ipn": "RES-001",
                          "qty": 1
                        }
                      ],
                      "description": "",
                      "ipn": "ASY-ROOT",
                      "qty": 1
                    }
                  ],
                  "description": "",
                  "ipn": "PCA-C",
                  "qty": 1
                }
              ],
              "description": "",
              "ipn": "PCA-A",
              "qty": 1
            },
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "ASY-ROOT",
                                  "qty": 1
                                }
                              ],
                              "description": "",
                              "ipn": "PCA-C",
                              "qty": 1
                            }
                          ],
                          "description": "",
                          "ipn": "PCA-A",
                          "qty": 1
                        },
                        {
                          "children": [
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "ASY-ROOT",
                                  "qty": 1
                                }
                              ],
                              "description": "",
                              "ipn": "PCA-C",
                              "qty": 2
                            }
                          ],
                          "description": "",
                          "ipn": "PCA-B",
                          "qty": 1
                        },
                        {
                          "children": [],
                          "description": "",
                          "ipn": "RES-001",
                          "qty": 1
                        }
                      ],
                      "description": "Root Assembly",
                      "ipn": "ASY-ROOT",
                      "qty": 1
                    }
                  ],
                  "description": "",
                  "ipn": "PCA-C",
                  "qty": 2
                }
              ],
              "description": "Sub-Assembly B",
              "ipn": "PCA-B",
              "qty": 1
            },
            {
              "children": [],
              "description": "Resistor",
              "ipn": "RES-001",
              "qty": 1
            }
          ],
          "description": "",
          "ipn": "ASY-ROOT"
        }
audit log error: SQL logic error: no such table: audit_log (1)
    handler_circular_bom_test.go:486: Complex circular BOM cost: 0.40
--- PASS: TestCircularBOM_ComplexCircular (0.01s)
=== RUN   TestCircularBOM_GracefulTermination
=== RUN   TestCircularBOM_GracefulTermination/BOM_retrieval_ALPHA
    handler_circular_bom_test.go:562: BOM retrieval ALPHA completed successfully
=== RUN   TestCircularBOM_GracefulTermination/BOM_retrieval_BETA
    handler_circular_bom_test.go:562: BOM retrieval BETA completed successfully
=== RUN   TestCircularBOM_GracefulTermination/Cost_calculation_ALPHA
audit log error: SQL logic error: no such table: audit_log (1)
    handler_circular_bom_test.go:562: Cost calculation ALPHA completed successfully
=== RUN   TestCircularBOM_GracefulTermination/Cost_calculation_BETA
audit log error: SQL logic error: no such table: audit_log (1)
    handler_circular_bom_test.go:562: Cost calculation BETA completed successfully
--- PASS: TestCircularBOM_GracefulTermination (0.00s)
    --- PASS: TestCircularBOM_GracefulTermination/BOM_retrieval_ALPHA (0.00s)
    --- PASS: TestCircularBOM_GracefulTermination/BOM_retrieval_BETA (0.00s)
    --- PASS: TestCircularBOM_GracefulTermination/Cost_calculation_ALPHA (0.00s)
    --- PASS: TestCircularBOM_GracefulTermination/Cost_calculation_BETA (0.00s)
=== RUN   TestCircularBOM_RejectOrLimit
    handler_circular_bom_test.go:628: Circular BOM depth-limited (acceptable): {
          "children": [
            {
              "children": [],
              "description": "",
              "ipn": "RES-001",
              "qty": 1
            },
            {
              "children": [
                {
                  "children": [],
                  "description": "",
                  "ipn": "RES-001",
                  "qty": 1
                },
                {
                  "children": [
                    {
                      "children": [],
                      "description": "",
                      "ipn": "RES-001",
                      "qty": 1
                    },
                    {
                      "children": [
                        {
                          "children": [],
                          "description": "",
                          "ipn": "RES-001",
                          "qty": 1
                        },
                        {
                          "children": [
                            {
                              "children": [],
                              "description": "",
                              "ipn": "RES-001",
                              "qty": 1
                            },
                            {
                              "children": [
                                {
                                  "children": [],
                                  "description": "",
                                  "ipn": "RES-001",
                                  "qty": 1
                                },
                                {
                                  "children": [],
                                  "description": "(max depth reached)",
                                  "ipn": "PCA-CIRCLE",
                                  "qty": 1
                                }
                              ],
                              "description": "",
                              "ipn": "PCA-CIRCLE",
                              "qty": 1
                            }
                          ],
                          "description": "",
                          "ipn": "PCA-CIRCLE",
                          "qty": 1
                        }
                      ],
                      "description": "Circular Assembly",
                      "ipn": "PCA-CIRCLE",
                      "qty": 1
                    }
                  ],
                  "description": "",
                  "ipn": "PCA-CIRCLE",
                  "qty": 1
                }
              ],
              "description": "",
              "ipn": "PCA-CIRCLE",
              "qty": 1
            }
          ],
          "description": "",
          "ipn": "PCA-CIRCLE"
        }
--- PASS: TestCircularBOM_RejectOrLimit (0.00s)
=== RUN   TestHandleListDevices
--- PASS: TestHandleListDevices (0.00s)
=== RUN   TestHandleListDevices_Empty
--- PASS: TestHandleListDevices_Empty (0.00s)
=== RUN   TestHandleGetDevice
--- PASS: TestHandleGetDevice (0.00s)
=== RUN   TestHandleGetDevice_NotFound
--- PASS: TestHandleGetDevice_NotFound (0.00s)
=== RUN   TestHandleCreateDevice
--- PASS: TestHandleCreateDevice (0.00s)
=== RUN   TestHandleCreateDevice_DefaultStatus
--- PASS: TestHandleCreateDevice_DefaultStatus (0.00s)
=== RUN   TestHandleCreateDevice_MissingSerialNumber
--- PASS: TestHandleCreateDevice_MissingSerialNumber (0.00s)
=== RUN   TestHandleCreateDevice_MissingIPN
--- PASS: TestHandleCreateDevice_MissingIPN (0.00s)
=== RUN   TestHandleCreateDevice_InvalidJSON
--- PASS: TestHandleCreateDevice_InvalidJSON (0.00s)
=== RUN   TestHandleUpdateDevice
--- PASS: TestHandleUpdateDevice (0.00s)
=== RUN   TestHandleExportDevices
--- PASS: TestHandleExportDevices (0.00s)
=== RUN   TestHandleImportDevices
--- PASS: TestHandleImportDevices (0.00s)
=== RUN   TestHandleImportDevices_SkipInvalidRows
--- PASS: TestHandleImportDevices_SkipInvalidRows (0.00s)
=== RUN   TestHandleImportDevices_MissingFile
--- PASS: TestHandleImportDevices_MissingFile (0.00s)
=== RUN   TestHandleDeviceHistory
--- PASS: TestHandleDeviceHistory (0.00s)
=== RUN   TestHandleDeviceHistory_NoHistory
--- PASS: TestHandleDeviceHistory_NoHistory (0.00s)
=== RUN   TestDocVersionCRUD
--- PASS: TestDocVersionCRUD (0.32s)
=== RUN   TestDocRelease
--- PASS: TestDocRelease (0.32s)
=== RUN   TestDocRevert
--- PASS: TestDocRevert (0.32s)
=== RUN   TestDocDiff
--- PASS: TestDocDiff (0.32s)
=== RUN   TestDocDiffMissingParams
--- PASS: TestDocDiffMissingParams (0.32s)
=== RUN   TestGetDocVersionByRevision
